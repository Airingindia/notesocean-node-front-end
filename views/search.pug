doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible" content="IE=edge")
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        meta(name="description" content="search result of "+query+" and "+data.size+" notes found")
        title #{query} | Notes Ocean
        include includes/bootstrap
        style
            include ../public/stylesheets/subpages/search.css
    body 
        header
            include includes/navbar
        section.main-section
            .search-container
                div.d-flex.justify-content-between
                    h1
                        span.text-danger #{data.size} 
                        span Notes Found
                    .filter-dropdown
                        button.btn.btn-sm.btn-danger(data-bs-toggle="modal" data-bs-target="#modal-filter") filter
                div.search-item-row(itemscope itemtype="https://schema.org/BreadcrumbList")
                    - let count = 0;
                    -for (let i = 0; i < data.requested.length; i++){
                        - count++;
                        - let productid = data.requested[i].product.id;
                        - let productname = data.requested[i].product.name;
                        - let timestamp = Number(data.requested[i].product.timestamp);
                        - let description = data.requested[i].product.description;
                        - let thumbnails = data.requested[i].product.thumbnails.replace("https://s3.ap-south-1.amazonaws.com/thumbnails.notesocean.com", "https://thumbnails.ncdn.in/fit-in/720x250/filters:format(webp)/filters:quality(100)") ;
                        - var img1 = data.requested[i].product.thumbnails.split(",")[0].replace("https://s3.ap-south-1.amazonaws.com/thumbnails.notesocean.com", "https://thumbnails.ncdn.in/fit-in/320x240/filters:format(webp)/filters:quality(100)");

                        - var img2 = data.requested[i].product.thumbnails.split(",")[0].replace("https://s3.ap-south-1.amazonaws.com/thumbnails.notesocean.com", "https://thumbnails.ncdn.in/fit-in/480x360/filters:format(webp)/filters:quality(100)");

                        - var img3 = data.requested[i].product.thumbnails.split(",")[0].replace("https://s3.ap-south-1.amazonaws.com/thumbnails.notesocean.com", "https://thumbnails.ncdn.in/fit-in/800x480/filters:format(webp)/filters:quality(100)");

                        - let views = data.requested[i].product.views;
                        - let pages = data.requested[i].product.pages;
                        - let firstName = data.requested[i].user.firstName;
                        - let lastName = data.requested[i].user.lastName;
                        - let userid = data.requested[i].user.id;
                        - let profileImage = data.requested[i].user.profileImage;
                            div(itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem")
                                a(href="/notes/"+productid,itemprop="item")
                                    div.d-flex.shadow.search-notes-item.my-3
                                        .flex-shrink-0
                                            img(src=thumbnails.split(",")[0] alt=productname,srcset=`${img1} 320w,${img2} 480w,${img3} 800w`,sizes="(max-width: 320px) 280px,(max-width: 480px) 440px,800px").search-item-img
                                        .flex-grow-1.ms-4.search-notes-item-details
                                            #{showtitle}
                                            h2
                                                span(itemprop="name") #{productname.substring(0,100)}
                                            small #{description.substring(0,200)}
                                            div.d-flex.mt-3.text-muted
                                                small.ml-2
                                                    i.fa.fa-globe.mx-1
                                                    span #{views} views
                                                small.mx-2
                                                    i.fa.fa-file.mx-1
                                                    span #{pages} pages
                                                small.mx-2
                                                    i.fa.fa-clock.mx-1
                                                    span #{time.get(timestamp)}

                                            .creator-box
                                                a(href="/profile/"+userid)
                                                    .d-flex.align-items-center.justify-content-center
                                                        .flex-shrink-0
                                                            img(src=profileImage.replace("https://s3.ap-south-1.amazonaws.com/profiles.notesocean.com", "https://profiles.ncdn.in/fit-in/720x250/filters:format(webp)/filters:quality(100)") alt=firstName).creator-img
                                                        .flex-grow-1.ms-2.pt-3
                                                            p.text-muted #{firstName} #{lastName}
                                meta(itemprop="position" content=count)
                    -}
                .modal#modal-filter
                    .modal-dialog.modal-dialog-centered
                        .modal-content.bg-white.border-0
                            .modal-header.bg-white.border-0
                                span Search Filter
                                i(class="btn-close" data-bs-dismiss="modal" aria-label="Close")
                            .modal-body.bg-white.border-0
                                .row
                                    .col-md-4.mb-3
                                        h6.text-danger Type
                                        .form-check
                                            input#typefilter.form-check-input(type='radio' name='type' checked='true' value="notes")
                                            label.form-check-label(for='type') Notes 
                                        .form-check
                                            input#typefilter.form-check-input(type='radio' name='type' value="collection")
                                            label.form-check-label(for='type') Collection
                                    .col-md-4.mb-3
                                        h6.text-danger Pages
                                        .form-check
                                            input#pagesfilter.form-check-input(type='radio' name='pages' checked='true' value="default")
                                            label.form-check-label(for='page') Deafult
                                        .form-check
                                            input#pagesfilter.form-check-input(type='radio' name='pages' value="0")
                                            label.form-check-label(for='page') 1-10 page
                                        .form-check
                                            input#pagesfilter.form-check-input(type='radio' name='pages' value="1")
                                            label.form-check-label(for='page') 10-20 page
                                        .form-check
                                            input#pagesfilter.form-check-input(type='radio' name='pages' value="3")
                                            label.form-check-label(for='page') 20-100 page
                                    .col-md-4.mb-3
                                        h6.text-danger Upload Date
                                        .form-check
                                            input#datefilter.form-check-input(type='radio' name='date' checked='true' value="default")
                                            label.form-check-label(for='datefilter') All time
                                        .form-check
                                            input#datefilter.form-check-input(type='radio' name='date' value="today")
                                            label.form-check-label(for='datefilter') Today
                                        .form-check
                                            input#datefilter.form-check-input(type='radio' name='date' value="thisweek" )
                                            label.form-check-label(for='datefilter') This week
                                        .form-check
                                            input#datefilter.form-check-input(type='radio' name='date' value="thismonth")
                                            label.form-check-label(for='datefilter') This month

                //- a(href="/")
                //-     .d-flex.shadow.p-1.search-notes-item.my-3
                //-         .flex-shrink-0
                //-             img(src='https://s3.ap-south-1.amazonaws.com/thumbnails.notesocean.com/112/1647064353819_6038_0.png' alt='...').search-item-img
                //-         .flex-grow-1.ms-3.search-notes-item-details
                //-             h2 This is some content from a media component. You can replace this with any content and adjust it as needed.
                //-             p Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita eligendi praesentium nemo impedit modi dignissimos quis hic non iusto quae?
                //-             div.d-flex
                //-                 p.ml-2
                //-                     i.fa.fa-globe.mx-1
                //-                     span 100 views
                //-                 p.mx-2
                //-                     i.fa.fa-file.mx-1
                //-                     span 100 pages
                //-                 p.mx-2
                //-                     i.fa.fa-clock-o.mx-1
                //-                     span 10 minute ago

                //-             .creator-box
                //-                 a(href="/")
                //-                     .d-flex.align-items-center
                //-                         .flex-shrink-0
                //-                             img(src='/images/dummy-user.jpeg' alt='...').creator-img
                //-                         .flex-grow-1.ms-3
                //-                             h3 Sachin kumar
                //- a(href="/")
                //-     .d-flex.shadow.p-1.search-notes-item.my-3
                //-         .flex-shrink-0
                //-             img(src='https://s3.ap-south-1.amazonaws.com/thumbnails.notesocean.com/112/1647064353819_6038_0.png' alt='...').search-item-img
                //-         .flex-grow-1.ms-3.search-notes-item-details
                //-             h2 This is some content from a media component. You can replace this with any content and adjust it as needed.
                //-             p Lorem ipsum dolor sit amet consectetur adipisicing elit. Expedita eligendi praesentium nemo impedit modi dignissimos quis hic non iusto quae?
                //-             div.d-flex
                //-                 p.ml-2
                //-                     i.fa.fa-globe.mx-1
                //-                     span 100 views
                //-                 p.mx-2
                //-                     i.fa.fa-file.mx-1
                //-                     span 100 pages
                //-                 p.mx-2
                //-                     i.fa.fa-clock-o.mx-1
                //-                     span 10 minute ago

                //-             .creator-box
                //-                 a(href="/")
                //-                     .d-flex.align-items-center
                //-                         .flex-shrink-0
                //-                             img(src='/images/dummy-user.jpeg' alt='...').creator-img
                //-                         .flex-grow-1.ms-3
                //-                             h3 Sachin kumar
        script
            include ../public/javascripts/common.js
        script
            include ../public/javascripts/subpages/search.js

