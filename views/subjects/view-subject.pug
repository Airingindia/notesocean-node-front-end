doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible" content="IE=edge")
        meta(name="viewport" content="width=device-width, initial-scale=1.0")
        include ../includes/bootstrap
        title #{subject.replace(/-/g, ' ')} | Notes Ocean
        meta(name="description",content=`View all the notes for  ${subject.replace(/-/g, ' ')}`)
        style
            include ../../public/stylesheets/subjects/view-subject.css
    body
        header
            include ../includes/navbar.pug
        section.main-section.container-fluid
            -if(data.requested.length<=0){
                .container.text-center.py-5
                    img(src="/images/animation/notFound.gif")
                    h3 No notes found for
                        strong.text-danger #{subject.replace(/-/g, ' ')}
                    p But you can request notes for this subject
                    a(href=`/request/new`).btn.btn-notesocean Request Notes
            -}else{
                h1.text-danger #{subject.replace(/-/g, ' ')} 
                    span.text-dark notes 
                .row(itemscope itemtype="https://schema.org/BreadcrumbList")
                    - let count = 0;
                    -for (let i = 0; i < data.requested.length; i++){
                        - count++;
                        - let productid = data.requested[i].uuid;
                        - let productname = data.requested[i].name;
                        - let timestamp = Number(data.requested[i].timestamp);
                        - let description = data.requested[i].description;
                        - let thumbnails = data.requested[i].thumbnails.replace("https://thumbnails.ncdn.in", "https://thumbnails.ncdn.in/fit-in/720x250/filters:format(webp)/filters:quality(100)/40x0:400x300") ;
                        - var img1 = data.requested[i].thumbnails.split(",")[0].replace("https://thumbnails.ncdn.in", "https://thumbnails.ncdn.in/fit-in/320x240/filters:format(webp)/filters:quality(100)/40x0:400x300");

                        - var img2 = data.requested[i].thumbnails.split(",")[0].replace("https://thumbnails.ncdn.in", "https://thumbnails.ncdn.in/fit-in/480x360/filters:format(webp)/filters:quality(100)/40x0:400x300");

                        - var img3 = data.requested[i].thumbnails.split(",")[0].replace("https://thumbnails.ncdn.in", "https://thumbnails.ncdn.in/fit-in/800x480/filters:format(webp)/filters:quality(100)/40x0:400x300");

                        - let views = data.requested[i].views;
                        - let pages = data.requested[i].pages;
                        - let firstName = data.requested[i].users.firstName;
                        - let lastName = data.requested[i].users.lastName;
                        - let userid = data.requested[i].users.uuid;
                        - let profileImage = data.requested[i].users.profileImage;
                        .col-xl-3.col-lg-4.col-md-4.col-sm-2.my-3(itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem")
                            a(href="/notes/"+productid , temprop="item")
                                .card.shadow.rounded.h-100
                                    .card-header
                                        span(itemprop="name").card-title=productname.substring(0, 100)+"..." 
                                    .card-body.p-0
                                        img.card-img-top.notes-thumbnail.lozad(src=thumbnails.split(",")[0],alt=productname,srcset=`${img1} 320w,${img2} 480w,${img3} 800w`,sizes="(max-width: 320px) 280px,(max-width: 480px) 440px,800px" loading="lazy")
                                    .card-footer
                                        a(href="/profile/"+userid)
                                            .notes-creatro-box
                                                img.creator-img(src=profileImage.replace("https://profiles.ncdn.in", "https://profiles.ncdn.in/fit-in/100x100/filters:format(webp)/filters:quality(100)") alt=firstName)
                                                span.mx-2 #{firstName} #{lastName} 
                                        .note-info-box.d-flex.justify-content-between.text-muted.mt-2
                                            span
                                                i.fa.fa-globe.mx-1
                                                span #{views} views
                                            span 
                                                i.fa.fa-file.mx-1
                                                span #{pages} pages
                                            span 
                                                i.fa.fa-clock.mx-1
                                                span #{time.get(timestamp)} 
                    -}
            -}
        include ../includes/footer.pug